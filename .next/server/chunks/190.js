exports.id=190,exports.ids=[190],exports.modules={1638:(a,b,c)=>{"use strict";c.d(b,{BaseLayout:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call BaseLayout() from the server but BaseLayout is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/ave.shalom/Documents/protogen_projects/public_records_lookup/src/components/layouts/BaseLayout.tsx","BaseLayout")},5034:(a,b,c)=>{"use strict";c.d(b,{ThemeProvider:()=>i});var d=c(21124);c(38301);var e=c(53690),f=c(62),g=c(95763);let h=(0,e.A)({palette:{primary:{main:"#1976d2"},secondary:{main:"#dc004e"}},components:{MuiCssBaseline:{styleOverrides:{body:{scrollbarColor:"#6b6b6b #2b2b2b","&::-webkit-scrollbar, & *::-webkit-scrollbar":{backgroundColor:"#2b2b2b"},"&::-webkit-scrollbar-thumb, & *::-webkit-scrollbar-thumb":{borderRadius:8,backgroundColor:"#6b6b6b",minHeight:24,border:"3px solid #2b2b2b"},"&::-webkit-scrollbar-thumb:focus, & *::-webkit-scrollbar-thumb:focus":{backgroundColor:"#959595"},"&::-webkit-scrollbar-thumb:active, & *::-webkit-scrollbar-thumb:active":{backgroundColor:"#959595"},"&::-webkit-scrollbar-thumb:hover, & *::-webkit-scrollbar-thumb:hover":{backgroundColor:"#959595"},"&::-webkit-scrollbar-corner, & *::-webkit-scrollbar-corner":{backgroundColor:"#2b2b2b"}}}}}});function i({children:a}){return(0,d.jsxs)(f.A,{theme:h,children:[(0,d.jsx)(g.Ay,{}),a]})}},29500:(a,b,c)=>{"use strict";c.d(b,{RequestForm:()=>R});var d=c(21124),e=c(38301),f=c(10617),g=c(37674),h=c(82605),i=c(98256),j=c(68886),k=c(14122),l=c(38233),m=c(91059),n=c(79515),o=c(20830),p=c(30902),q=c(30873),r=c(36551),s=c(31980),t=c(99546);let u=t.Ik({startDate:t.Yj().min(1,"Start date is required"),endDate:t.Yj().min(1,"End date is required"),preset:t.Yj().optional()}).refine(a=>!a.startDate||!a.endDate||new Date(a.startDate)<=new Date(a.endDate),{message:"Start date must be before or equal to end date",path:["startDate"]}),v=t.Ik({title:t.Yj().min(5,"Title must be at least 5 characters"),department:t.Yj().min(1,"Please select a department"),dateRange:u,description:t.Yj().min(20,"Description must be at least 20 characters"),contactEmail:t.Yj().email("Please provide a valid email"),attachments:t.YO(t.bz()).optional()});var w=c(50937),x=c(42387),y=c(30818),z=c(27114),A=c(44079),B=c(53537),C=c(52881),D=c(8198),E=c(25715),F=c(68960),G=c(97117),H=c(18168);let I=(0,H.Ay)(f.A)(({theme:a})=>({border:`2px dashed ${a.palette.divider}`,borderRadius:a.shape.borderRadius,padding:a.spacing(4),textAlign:"center",cursor:"pointer","&:hover":{backgroundColor:a.palette.action.hover}})),J=(0,H.Ay)(f.A)(({theme:a})=>({marginTop:a.spacing(2)})),K=a=>{if(0===a)return"0 Bytes";let b=Math.floor(Math.log(a)/Math.log(1024));return`${parseFloat((a/Math.pow(1024,b)).toFixed(2))} ${["Bytes","KB","MB","GB"][b]}`},L=({onFilesSelected:a,maxFiles:b=5,maxSize:c=0xa00000,acceptedFileTypes:g=["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain","image/jpeg","image/png"],isLoading:h=!1,error:i=""})=>{let[j,k]=(0,e.useState)([]),l=(0,e.useCallback)((b,c)=>{let d=[...j,...b];k(d),a(d)},[a,j]),m=(0,e.useCallback)(b=>{let c=j.filter((a,c)=>c!==b);k(c),a(c)},[j,a]),{getRootProps:p,getInputProps:q,isDragActive:s,fileRejections:t}=(0,B.VB)({onDrop:l,maxFiles:b,maxSize:c,accept:g.reduce((a,b)=>({...a,[b]:[]}),{})});return(0,d.jsxs)(f.A,{children:[(0,d.jsxs)(I,{...p(),sx:{bgcolor:s?"action.hover":"background.paper"},children:[(0,d.jsx)("input",{...q()}),(0,d.jsx)(C.A,{sx:{fontSize:40,color:"primary.main",mb:2}}),(0,d.jsx)(n.A,{variant:"body1",gutterBottom:!0,children:s?"Drop the files here":"Drag and drop files here, or click to select files"}),(0,d.jsx)(n.A,{variant:"caption",color:"textSecondary",children:"Accepted files: PDF, Word documents, text files, images (JPG, PNG)"}),(0,d.jsxs)(n.A,{variant:"caption",display:"block",color:"textSecondary",children:["Maximum size: ",K(c)]}),(0,d.jsx)(o.A,{variant:"contained",sx:{mt:2},disabled:h,children:"Select Files"})]}),h&&(0,d.jsx)(f.A,{sx:{mt:2},children:(0,d.jsx)(x.A,{})}),i&&(0,d.jsx)(n.A,{color:"error",variant:"body2",sx:{mt:1},children:i}),t.length>0&&(0,d.jsx)(f.A,{sx:{mt:2},children:t.map(({file:a,errors:b},c)=>(0,d.jsxs)(r.A,{severity:"error",sx:{mb:1},children:[a.name,": ",b.map(a=>a.message).join(", ")]},`${a.name}-${c}`))}),j.length>0&&(0,d.jsxs)(J,{children:[(0,d.jsxs)(n.A,{variant:"subtitle2",gutterBottom:!0,children:["Selected Files (",j.length,"/",b,"):"]}),j.map((a,b)=>{let c=(a=>a.type.startsWith("image/")?URL.createObjectURL(a):null)(a);return(0,d.jsx)(y.A,{sx:{mb:1},children:(0,d.jsx)(z.A,{sx:{p:2,"&:last-child":{pb:2}},children:(0,d.jsxs)(f.A,{sx:{display:"flex",alignItems:"center",gap:2},children:[c?(0,d.jsx)(f.A,{component:"img",src:c,alt:a.name,sx:{width:40,height:40,objectFit:"cover",borderRadius:1}}):(0,d.jsx)(f.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:40,height:40},children:(a=>a.type.startsWith("image/")?(0,d.jsx)(F.A,{color:"primary"}):"application/pdf"===a.type?(0,d.jsx)(G.A,{color:"error"}):(0,d.jsx)(E.A,{color:"action"}))(a)}),(0,d.jsxs)(f.A,{sx:{flexGrow:1,minWidth:0},children:[(0,d.jsx)(n.A,{variant:"body2",noWrap:!0,title:a.name,children:a.name}),(0,d.jsx)(n.A,{variant:"caption",color:"textSecondary",children:K(a.size)})]}),(0,d.jsx)(A.A,{size:"small",onClick:()=>m(b),disabled:h,"aria-label":`Remove ${a.name}`,children:(0,d.jsx)(D.A,{})})]})})},`${a.name}-${b}`)})]})]})};var M=c(82666);let N=[{value:"last-7-days",label:"Last 7 days"},{value:"last-30-days",label:"Last 30 days"},{value:"last-90-days",label:"Last 90 days"},{value:"last-year",label:"Last year"},{value:"custom",label:"Custom range"}],O=({value:a={startDate:"",endDate:"",preset:""},onChange:b,error:c="",disabled:m=!1,label:o="Date Range"})=>{let[p,q]=(0,e.useState)(a.preset||""),[r,s]=(0,e.useState)(a.startDate||""),[t,u]=(0,e.useState)(a.endDate||""),v="custom"===p;return(0,d.jsxs)(f.A,{children:[(0,d.jsx)(n.A,{variant:"subtitle2",gutterBottom:!0,children:o}),(0,d.jsxs)(h.A,{fullWidth:!0,error:!!c,sx:{mb:2},children:[(0,d.jsx)(i.A,{children:"Time Period"}),(0,d.jsx)(j.A,{value:p,label:"Time Period",onChange:a=>{let c=a.target.value;if(q(c),"custom"===c)b({startDate:r,endDate:t,preset:c});else{let a=(a=>{let b=new Date,c=a=>a.toISOString().split("T")[0];switch(a){case"last-7-days":return{startDate:c(new Date(b.getTime()-6048e5)),endDate:c(b)};case"last-30-days":return{startDate:c(new Date(b.getTime()-2592e6)),endDate:c(b)};case"last-90-days":return{startDate:c(new Date(b.getTime()-7776e6)),endDate:c(b)};case"last-year":return{startDate:c(new Date(b.getTime()-31536e6)),endDate:c(b)};default:return{}}})(c),d={startDate:a.startDate||"",endDate:a.endDate||"",preset:c};s(d.startDate),u(d.endDate),b(d)}},disabled:m,"data-testid":"date-range-preset",children:N.map(a=>(0,d.jsx)(k.A,{value:a.value,children:a.label},a.value))}),c&&(0,d.jsx)(l.A,{children:c})]}),v&&(0,d.jsxs)(M.Ay,{container:!0,spacing:2,children:[(0,d.jsx)(M.Ay,{item:!0,xs:12,sm:6,children:(0,d.jsx)(g.A,{label:"Start Date",type:"date",value:r,onChange:a=>{let c=a.target.value;s(c),b({startDate:c,endDate:t,preset:p})},fullWidth:!0,disabled:m,InputLabelProps:{shrink:!0},inputProps:{max:t||void 0},"data-testid":"start-date-input"})}),(0,d.jsx)(M.Ay,{item:!0,xs:12,sm:6,children:(0,d.jsx)(g.A,{label:"End Date",type:"date",value:t,onChange:a=>{let c=a.target.value;u(c),b({startDate:r,endDate:c,preset:p})},fullWidth:!0,disabled:m,InputLabelProps:{shrink:!0},inputProps:{min:r||void 0,max:new Date().toISOString().split("T")[0]},"data-testid":"end-date-input"})})]}),!v&&(r||t)&&(0,d.jsx)(f.A,{sx:{mt:1,p:2,bgcolor:"grey.50",borderRadius:1},children:(0,d.jsxs)(n.A,{variant:"body2",color:"textSecondary",children:["Selected range: ",r," to ",t]})})]})};var P=c(94058);let Q=[{id:"police",name:"Police Department"},{id:"fire",name:"Fire Department"},{id:"clerk",name:"City Clerk"},{id:"finance",name:"Finance Department"},{id:"other",name:"Other"}],R=()=>{let[a,b]=(0,e.useState)(!1),[c,t]=(0,e.useState)(null),[u,x]=(0,e.useState)(!1),[y,z]=(0,e.useState)(null),[A,B]=(0,e.useState)([]),[C,D]=(0,e.useState)(""),{control:E,handleSubmit:F,formState:{errors:G},setValue:H,watch:I}=(0,s.mN)({resolver:(0,w.u)(v),defaultValues:{title:"",department:"",description:"",dateRange:{startDate:"",endDate:"",preset:""},contactEmail:""}}),J=I("dateRange"),K=async a=>{b(!0),t(null);try{let b={...a,files:A},c=await (0,P.Fc)(b);console.log("Request saved:",c);let d=`/confirmation?trackingId=${encodeURIComponent(c.trackingId)}`;window.location.href=d}catch(a){t(a instanceof Error?a.message:"An error occurred while submitting your request"),b(!1)}};return(0,d.jsxs)(f.A,{component:"form",onSubmit:F(K),noValidate:!0,children:[(0,d.jsxs)(f.A,{sx:{display:"flex",flexDirection:"column",gap:3},children:[(0,d.jsx)(f.A,{children:(0,d.jsx)(s.xI,{name:"title",control:E,render:({field:b})=>(0,d.jsx)(g.A,{...b,label:"Request Title",fullWidth:!0,error:!!G.title,helperText:G.title?.message,disabled:a})})}),(0,d.jsx)(f.A,{sx:{display:"flex",gap:3,flexDirection:{xs:"column",md:"row"}},children:(0,d.jsx)(f.A,{sx:{flex:1},children:(0,d.jsx)(s.xI,{name:"department",control:E,render:({field:b})=>(0,d.jsxs)(h.A,{fullWidth:!0,error:!!G.department,children:[(0,d.jsx)(i.A,{children:"Department"}),(0,d.jsx)(j.A,{...b,label:"Department",disabled:a,"data-testid":"department-select",children:Q.map(a=>(0,d.jsx)(k.A,{value:a.id,children:a.name},a.id))}),(0,d.jsx)(l.A,{children:G.department?.message})]})})})}),(0,d.jsx)(f.A,{children:(0,d.jsx)(O,{value:J,onChange:a=>{H("dateRange",a,{shouldValidate:!0})},error:G.dateRange?.message||G.dateRange?.startDate?.message,disabled:a,label:"Records Date Range"})}),(0,d.jsx)(f.A,{children:(0,d.jsx)(s.xI,{name:"description",control:E,render:({field:b})=>(0,d.jsx)(g.A,{...b,label:"Request Description",multiline:!0,rows:4,fullWidth:!0,error:!!G.description,helperText:G.description?.message,disabled:a})})}),(0,d.jsx)(f.A,{children:(0,d.jsx)(s.xI,{name:"contactEmail",control:E,render:({field:b})=>(0,d.jsx)(g.A,{...b,label:"Contact Email",type:"email",fullWidth:!0,error:!!G.contactEmail,helperText:G.contactEmail?.message,disabled:a})})}),(0,d.jsxs)(f.A,{children:[(0,d.jsx)(m.A,{sx:{my:2}}),(0,d.jsx)(n.A,{variant:"h6",gutterBottom:!0,children:"Supporting Documents (Optional)"}),(0,d.jsx)(n.A,{variant:"body2",color:"textSecondary",sx:{mb:2},children:"Upload any documents that help clarify or support your records request."}),(0,d.jsx)(L,{onFilesSelected:a=>{B(a),D("")},maxFiles:5,maxSize:0xa00000,acceptedFileTypes:["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain","image/jpeg","image/png"],isLoading:a,error:C})]}),(0,d.jsx)(f.A,{children:(0,d.jsx)(o.A,{type:"submit",variant:"contained",color:"primary",size:"large",fullWidth:!0,disabled:a,startIcon:a?(0,d.jsx)(p.A,{size:20}):null,children:a?"Submitting...":"Submit Request"})})]}),(0,d.jsx)(q.A,{open:!!c||u,autoHideDuration:u?null:6e3,onClose:()=>{t(null),x(!1),z(null)},children:(0,d.jsx)(r.A,{severity:c?"error":"success",variant:"filled",onClose:()=>{t(null),x(!1),z(null)},children:c||(y?`Request submitted successfully! Your tracking ID is: ${y}. Please save this ID to track your request status.`:"Request submitted successfully!")})})]})}},44769:(a,b,c)=>{"use strict";c.d(b,{RequestForm:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call RequestForm() from the server but RequestForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/ave.shalom/Documents/protogen_projects/public_records_lookup/src/components/request/RequestForm/index.tsx","RequestForm")},50465:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,81170,23)),Promise.resolve().then(c.t.bind(c,23597,23)),Promise.resolve().then(c.t.bind(c,36893,23)),Promise.resolve().then(c.t.bind(c,89748,23)),Promise.resolve().then(c.t.bind(c,6060,23)),Promise.resolve().then(c.t.bind(c,7184,23)),Promise.resolve().then(c.t.bind(c,69576,23)),Promise.resolve().then(c.t.bind(c,73041,23)),Promise.resolve().then(c.t.bind(c,51384,23))},51472:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>h,metadata:()=>g});var d=c(75338);c(74515);var e=c(89060),f=c(1638);let g={title:"Public Records Request Portal",description:"Submit and manage public records requests"};function h({children:a}){return(0,d.jsx)("html",{lang:"en",children:(0,d.jsx)("body",{children:(0,d.jsx)(e.ThemeProvider,{children:(0,d.jsx)(f.BaseLayout,{children:a})})})})}},65378:(a,b,c)=>{Promise.resolve().then(c.bind(c,1638)),Promise.resolve().then(c.bind(c,89060))},70440:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>e});var d=c(97523);let e=async a=>[{type:"image/x-icon",sizes:"16x16",url:(0,d.fillMetadataSegment)(".",await a.params,"favicon.ico")+""}]},83530:(a,b,c)=>{Promise.resolve().then(c.bind(c,86400)),Promise.resolve().then(c.bind(c,5034))},86400:(a,b,c)=>{"use strict";c.d(b,{BaseLayout:()=>m});var d=c(21124);c(38301);var e=c(10617),f=c(47802),g=c(23749),h=c(79515),i=c(20830),j=c(43737),k=c(3991),l=c.n(k);function m({children:a}){return(0,d.jsxs)(e.A,{sx:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:[(0,d.jsx)(f.A,{position:"static",children:(0,d.jsxs)(g.A,{children:[(0,d.jsx)(h.A,{variant:"h6",component:"div",sx:{flexGrow:1},children:(0,d.jsx)(l(),{href:"/",style:{color:"inherit",textDecoration:"none"},children:"Public Records Portal"})}),(0,d.jsxs)(e.A,{sx:{display:"flex",gap:2},children:[(0,d.jsx)(i.A,{color:"inherit",component:l(),href:"/",children:"Submit Request"}),(0,d.jsx)(i.A,{color:"inherit",component:l(),href:"/status",children:"Track Request"})]})]})}),(0,d.jsx)(e.A,{component:"main",sx:{flexGrow:1,py:3},children:(0,d.jsx)(j.A,{maxWidth:"lg",children:a})}),(0,d.jsx)(e.A,{component:"footer",sx:{py:2,bgcolor:"grey.100"},children:(0,d.jsx)(j.A,{maxWidth:"lg",children:(0,d.jsx)(h.A,{variant:"body2",color:"text.secondary",align:"center",children:"\xa9 2024 Public Records Portal. All rights reserved."})})})]})}},86913:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,54160,23)),Promise.resolve().then(c.t.bind(c,31603,23)),Promise.resolve().then(c.t.bind(c,68495,23)),Promise.resolve().then(c.t.bind(c,75170,23)),Promise.resolve().then(c.t.bind(c,77526,23)),Promise.resolve().then(c.t.bind(c,78922,23)),Promise.resolve().then(c.t.bind(c,29234,23)),Promise.resolve().then(c.t.bind(c,12263,23)),Promise.resolve().then(c.bind(c,82146))},89060:(a,b,c)=>{"use strict";c.d(b,{ThemeProvider:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call ThemeProvider() from the server but ThemeProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/ave.shalom/Documents/protogen_projects/public_records_lookup/src/components/providers/ThemeProvider.tsx","ThemeProvider")},94058:(a,b,c)=>{"use strict";let d,e;c.d(b,{hY:()=>k,Fc:()=>j});var f=c(67402),g=c(34410);let{app:h,db:i}=(d=(0,g.Dk)().length?(0,g.Dk)()[0]:(0,g.Wp)({apiKey:"demo-key",authDomain:"demo-project.firebaseapp.com",projectId:"public-records-demo",storageBucket:"public-records-demo.appspot.com",messagingSenderId:"123456789",appId:"1:123456789:web:demo123"}),e||(e=(0,f.aU)(d)),{app:d,db:e}),j=async a=>{try{let b=(()=>{let a=Date.now().toString().slice(-6),b=Math.random().toString(36).substring(2,6).toUpperCase();return`PR-${a}-${b}`})(),c=f.Dc.now(),d={trackingId:b,title:a.title,department:a.department,description:a.description,dateRange:a.dateRange,contactEmail:a.contactEmail,status:"submitted",submittedAt:c,updatedAt:c,attachmentCount:a.files?.length||0,attachmentPaths:[]},e=await (0,f.gS)((0,f.rJ)(i,"requests"),d);return console.log("Request saved with ID:",e.id),{id:e.id,trackingId:b}}catch(a){throw console.error("Error saving request:",a),Error("Failed to save request. Please try again.")}},k=async a=>{try{let b=(0,f.P)((0,f.rJ)(i,"requests"),(0,f._M)("trackingId","==",a)),c=await (0,f.GG)(b);if(c.empty)return null;let d=c.docs[0];return{id:d.id,...d.data()}}catch(a){throw console.error("Error fetching request by tracking ID:",a),Error("Failed to fetch request")}}}};