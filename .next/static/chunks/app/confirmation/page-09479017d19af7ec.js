(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[786],{5407:(e,t,r)=>{Promise.resolve().then(r.bind(r,5882))},5882:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>D});var n=r(5155),a=r(2115),s=r(2853),i=r(4474),o=r(7260),c=r(7335),l=r(5635),d=r(9767),h=r(4578),u=r(3077),x=r(690),m=r(8548),p=r(6697);let y=(0,p.A)((0,n.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckCircle"),g=(0,p.A)((0,n.jsx)("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"}),"ContentCopy"),j=(0,p.A)((0,n.jsx)("path",{d:"M5 20h14v-2H5zM19 9h-4V3H9v6H5l7 7z"}),"Download");var A=r(4662);function b(e){let{request:t,onCopyTrackingId:r,onStartNewRequest:a}=e,i=e=>({police:"Police Department",fire:"Fire Department",clerk:"City Clerk",finance:"Finance Department",other:"Other"})[e]||e;return(0,n.jsxs)(s.A,{sx:{maxWidth:800,mx:"auto",p:3},children:[(0,n.jsxs)(c.A,{elevation:3,sx:{p:4,mb:3,textAlign:"center",bgcolor:"success.50"},children:[(0,n.jsx)(y,{sx:{fontSize:64,color:"success.main",mb:2}}),(0,n.jsx)(l.A,{variant:"h4",component:"h1",gutterBottom:!0,color:"success.main",children:"Request Submitted Successfully!"}),(0,n.jsx)(l.A,{variant:"body1",color:"text.secondary",children:"Your public records request has been received and assigned a tracking number."})]}),(0,n.jsx)(d.A,{elevation:2,sx:{mb:3},children:(0,n.jsxs)(h.A,{children:[(0,n.jsx)(l.A,{variant:"h6",gutterBottom:!0,children:"Tracking Information"}),(0,n.jsxs)(u.Ay,{container:!0,spacing:2,alignItems:"center",children:[(0,n.jsxs)(u.Ay,{item:!0,xs:12,sm:8,children:[(0,n.jsx)(l.A,{variant:"body2",color:"text.secondary",children:"Tracking ID"}),(0,n.jsx)(l.A,{variant:"h5",fontWeight:"bold",color:"primary.main",children:t.trackingId})]}),(0,n.jsx)(u.Ay,{item:!0,xs:12,sm:4,children:(0,n.jsx)(x.A,{variant:"outlined",startIcon:(0,n.jsx)(g,{}),onClick:r,fullWidth:!0,size:"small",children:"Copy ID"})})]})]})}),(0,n.jsx)(d.A,{elevation:2,sx:{mb:3},children:(0,n.jsxs)(h.A,{children:[(0,n.jsx)(l.A,{variant:"h6",gutterBottom:!0,children:"Request Details"}),(0,n.jsxs)(u.Ay,{container:!0,spacing:2,children:[(0,n.jsxs)(u.Ay,{item:!0,xs:12,sm:6,children:[(0,n.jsx)(l.A,{variant:"body2",color:"text.secondary",children:"Request Title"}),(0,n.jsx)(l.A,{variant:"body1",gutterBottom:!0,children:t.title})]}),(0,n.jsxs)(u.Ay,{item:!0,xs:12,sm:6,children:[(0,n.jsx)(l.A,{variant:"body2",color:"text.secondary",children:"Department"}),(0,n.jsx)(l.A,{variant:"body1",gutterBottom:!0,children:i(t.department)})]}),(0,n.jsxs)(u.Ay,{item:!0,xs:12,sm:6,children:[(0,n.jsx)(l.A,{variant:"body2",color:"text.secondary",children:"Contact Email"}),(0,n.jsx)(l.A,{variant:"body1",gutterBottom:!0,children:t.contactEmail})]}),(0,n.jsxs)(u.Ay,{item:!0,xs:12,sm:6,children:[(0,n.jsx)(l.A,{variant:"body2",color:"text.secondary",children:"Status"}),(0,n.jsx)(m.A,{label:t.status.replace("_"," ").toUpperCase(),color:(e=>{switch(e){case"submitted":return"primary";case"processing":return"info";case"under_review":return"warning";case"completed":return"success";case"rejected":return"error";default:return"default"}})(t.status),size:"small"})]}),(0,n.jsxs)(u.Ay,{item:!0,xs:12,children:[(0,n.jsx)(l.A,{variant:"body2",color:"text.secondary",children:"Date Range"}),(0,n.jsxs)(l.A,{variant:"body1",gutterBottom:!0,children:[t.dateRange.startDate," to ",t.dateRange.endDate,t.dateRange.preset&&" (".concat(t.dateRange.preset,")")]})]}),(0,n.jsxs)(u.Ay,{item:!0,xs:12,children:[(0,n.jsx)(l.A,{variant:"body2",color:"text.secondary",children:"Description"}),(0,n.jsx)(l.A,{variant:"body1",gutterBottom:!0,children:t.description})]}),t.attachmentCount>0&&(0,n.jsxs)(u.Ay,{item:!0,xs:12,children:[(0,n.jsx)(l.A,{variant:"body2",color:"text.secondary",children:"Attachments"}),(0,n.jsxs)(l.A,{variant:"body1",gutterBottom:!0,children:[t.attachmentCount," file(s) uploaded"]})]}),(0,n.jsxs)(u.Ay,{item:!0,xs:12,children:[(0,n.jsx)(l.A,{variant:"body2",color:"text.secondary",children:"Submitted"}),(0,n.jsx)(l.A,{variant:"body1",children:(e=>{if(!e)return"";let t=e.toDate?e.toDate():new Date(e);return(0,A.GP)(t,"MMMM d, yyyy 'at' h:mm a")})(t.submittedAt)})]})]})]})}),(0,n.jsx)(d.A,{elevation:2,sx:{mb:3},children:(0,n.jsxs)(h.A,{children:[(0,n.jsx)(l.A,{variant:"h6",gutterBottom:!0,children:"What Happens Next?"}),(0,n.jsxs)(l.A,{variant:"body1",paragraph:!0,children:["1. Your request will be reviewed by the ",i(t.department)]}),(0,n.jsx)(l.A,{variant:"body1",paragraph:!0,children:"2. You will receive an email confirmation shortly"}),(0,n.jsx)(l.A,{variant:"body1",paragraph:!0,children:"3. Processing typically takes 5-10 business days"}),(0,n.jsx)(l.A,{variant:"body1",paragraph:!0,children:"4. You can track your request status using the tracking ID above"})]})}),(0,n.jsxs)(s.A,{sx:{display:"flex",gap:2,justifyContent:"center",flexWrap:"wrap"},children:[(0,n.jsx)(x.A,{variant:"contained",onClick:a,size:"large",children:"Submit Another Request"}),(0,n.jsx)(x.A,{variant:"outlined",size:"large",onClick:()=>window.location.href="/status",children:"Track This Request"}),(0,n.jsx)(x.A,{variant:"outlined",startIcon:(0,n.jsx)(j,{}),size:"large",onClick:()=>window.print(),children:"Print Confirmation"})]}),(0,n.jsx)(s.A,{sx:{mt:4,p:2,bgcolor:"grey.50",borderRadius:1},children:(0,n.jsxs)(l.A,{variant:"body2",color:"text.secondary",align:"center",children:[(0,n.jsx)("strong",{children:"Important:"})," Please save your tracking ID (",t.trackingId,") to check the status of your request. You will need this ID for any inquiries."]})})]})}var v=r(8667),f=r(9770);function k(){let e=(0,o.useSearchParams)().get("trackingId"),[t,r]=(0,a.useState)(null),[c,d]=(0,a.useState)(!0),[h,u]=(0,a.useState)(null);(0,a.useEffect)(()=>{(async()=>{if(!e){u("No tracking ID provided"),d(!1);return}try{let t=await (0,v.hY)(e);t?r(t):u("Request not found")}catch(e){u(e instanceof Error?e.message:"Failed to load request")}finally{d(!1)}})()},[e]);let x=async()=>{if(e)try{await navigator.clipboard.writeText(e),console.log("Tracking ID copied to clipboard")}catch(e){console.error("Failed to copy tracking ID:",e)}};return c?(0,n.jsx)(s.A,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:(0,n.jsx)(i.A,{})}):h||!t?(0,n.jsxs)(s.A,{sx:{maxWidth:600,mx:"auto",p:3},children:[(0,n.jsx)(f.A,{severity:"error",sx:{mb:2},children:h||"Request not found"}),(0,n.jsx)(l.A,{variant:"body1",children:"Please check your tracking ID and try again, or contact support if the problem persists."})]}):(0,n.jsx)(b,{request:t,onCopyTrackingId:x,onStartNewRequest:()=>{window.location.href="/"}})}function w(){return(0,n.jsx)(s.A,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:(0,n.jsx)(i.A,{})})}function D(){return(0,n.jsx)(a.Suspense,{fallback:(0,n.jsx)(w,{}),children:(0,n.jsx)(k,{})})}},8667:(e,t,r)=>{"use strict";let n,a;r.d(t,{hY:()=>h,Fc:()=>d});var s=r(9708),i=r(2078);let o={apiKey:"demo-key",authDomain:"demo-project.firebaseapp.com",projectId:"public-records-demo",storageBucket:"public-records-demo.appspot.com",messagingSenderId:"123456789",appId:"1:123456789:web:demo123"},{app:c,db:l}=(()=>{if(n=(0,i.Dk)().length?(0,i.Dk)()[0]:(0,i.Wp)(o),!a){a=(0,s.aU)(n);let e="localhost:8080";try{let[t,r]=e.split(":");(0,s.vN)(a,t,parseInt(r)),console.log("Connected to Firestore emulator at",e)}catch(e){console.warn("Failed to connect to Firestore emulator:",e)}}return{app:n,db:a}})(),d=async e=>{try{var t;let r=(()=>{let e=Date.now().toString().slice(-6),t=Math.random().toString(36).substring(2,6).toUpperCase();return"PR-".concat(e,"-").concat(t)})(),n=s.Dc.now(),a={trackingId:r,title:e.title,department:e.department,description:e.description,dateRange:e.dateRange,contactEmail:e.contactEmail,status:"submitted",submittedAt:n,updatedAt:n,attachmentCount:(null==(t=e.files)?void 0:t.length)||0,attachmentPaths:[]},i=await (0,s.gS)((0,s.rJ)(l,"requests"),a);return console.log("Request saved with ID:",i.id),{id:i.id,trackingId:r}}catch(e){throw console.error("Error saving request:",e),Error("Failed to save request. Please try again.")}},h=async e=>{try{let t=(0,s.P)((0,s.rJ)(l,"requests"),(0,s._M)("trackingId","==",e)),r=await (0,s.GG)(t);if(r.empty)return null;let n=r.docs[0];return{id:n.id,...n.data()}}catch(e){throw console.error("Error fetching request by tracking ID:",e),Error("Failed to fetch request")}}}},e=>{e.O(0,[135,36,283,437,441,255,358],()=>e(e.s=5407)),_N_E=e.O()}]);