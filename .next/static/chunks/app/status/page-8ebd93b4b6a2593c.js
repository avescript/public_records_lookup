(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[557],{146:(e,t,r)=>{Promise.resolve().then(r.bind(r,8460))},8460:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>j});var a=r(5155),n=r(2115),s=r(2853),i=r(5635),o=r(7335),c=r(9562),d=r(690),l=r(4474),u=r(9770),h=r(9767),m=r(4578),x=r(8548),y=r(1067),p=r(3077);let g=(0,r(6697).A)((0,a.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search");var b=r(4662),A=r(8667);function j(){var e;let[t,r]=(0,n.useState)(""),[j,v]=(0,n.useState)(!1),[f,D]=(0,n.useState)(null),[k,q]=(0,n.useState)(null),w=async()=>{if(!t.trim())return void D("Please enter a tracking ID");v(!0),D(null),q(null);try{let e=await (0,A.hY)(t.trim());e?q(e):D("Request not found. Please check your tracking ID and try again.")}catch(e){D(e instanceof Error?e.message:"Failed to retrieve request")}finally{v(!1)}},I=e=>{if(!e)return"";let t=e.toDate?e.toDate():new Date(e);return(0,b.GP)(t,"MMMM d, yyyy 'at' h:mm a")};return(0,a.jsxs)(s.A,{sx:{maxWidth:800,mx:"auto",p:3},children:[(0,a.jsx)(i.A,{variant:"h4",component:"h1",gutterBottom:!0,align:"center",children:"Track Your Request"}),(0,a.jsx)(i.A,{variant:"body1",paragraph:!0,align:"center",color:"text.secondary",children:"Enter your tracking ID to check the status of your public records request."}),(0,a.jsx)(o.A,{elevation:2,sx:{p:3,mb:3},children:(0,a.jsxs)(s.A,{sx:{display:"flex",gap:2,alignItems:"flex-start"},children:[(0,a.jsx)(c.A,{fullWidth:!0,label:"Tracking ID",placeholder:"Enter your tracking ID (e.g., PR-123456-ABCD)",value:t,onChange:e=>r(e.target.value),onKeyPress:e=>{"Enter"===e.key&&w()},error:!!f&&!k,helperText:f&&!k?f:"Enter the tracking ID from your confirmation email or receipt",disabled:j}),(0,a.jsx)(d.A,{variant:"contained",startIcon:j?(0,a.jsx)(l.A,{size:16,color:"inherit"}):(0,a.jsx)(g,{}),onClick:w,disabled:j||!t.trim(),sx:{minWidth:120,height:56},children:j?"Searching...":"Search"})]})}),f&&!k&&(0,a.jsx)(u.A,{severity:"error",sx:{mb:3},children:f}),k&&(0,a.jsx)(h.A,{elevation:2,children:(0,a.jsxs)(m.A,{children:[(0,a.jsxs)(s.A,{sx:{mb:3},children:[(0,a.jsx)(i.A,{variant:"h5",gutterBottom:!0,children:"Request Status"}),(0,a.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[(0,a.jsx)(x.A,{label:k.status.replace("_"," ").toUpperCase(),color:(e=>{switch(e){case"submitted":return"primary";case"processing":return"info";case"under_review":return"warning";case"completed":return"success";case"rejected":return"error";default:return"default"}})(k.status),size:"medium"}),(0,a.jsxs)(i.A,{variant:"body2",color:"text.secondary",children:["Last updated: ",I(k.updatedAt)]})]}),(0,a.jsx)(i.A,{variant:"body1",color:"text.secondary",children:(e=>{switch(e){case"submitted":return"Your request has been received and is waiting to be processed.";case"processing":return"Your request is currently being processed by the department.";case"under_review":return"Your request is under review. Additional approval may be required.";case"completed":return"Your request has been completed and is ready for delivery.";case"rejected":return"Your request has been rejected. Please contact the department for more information.";default:return"Status unknown."}})(k.status)})]}),(0,a.jsx)(y.A,{sx:{my:3}}),(0,a.jsx)(i.A,{variant:"h6",gutterBottom:!0,children:"Request Details"}),(0,a.jsxs)(p.Ay,{container:!0,spacing:2,children:[(0,a.jsxs)(p.Ay,{item:!0,xs:12,sm:6,children:[(0,a.jsx)(i.A,{variant:"body2",color:"text.secondary",children:"Tracking ID"}),(0,a.jsx)(i.A,{variant:"body1",fontWeight:"medium",children:k.trackingId})]}),(0,a.jsxs)(p.Ay,{item:!0,xs:12,sm:6,children:[(0,a.jsx)(i.A,{variant:"body2",color:"text.secondary",children:"Submitted"}),(0,a.jsx)(i.A,{variant:"body1",children:I(k.submittedAt)})]}),(0,a.jsxs)(p.Ay,{item:!0,xs:12,sm:6,children:[(0,a.jsx)(i.A,{variant:"body2",color:"text.secondary",children:"Department"}),(0,a.jsx)(i.A,{variant:"body1",children:{police:"Police Department",fire:"Fire Department",clerk:"City Clerk",finance:"Finance Department",other:"Other"}[e=k.department]||e})]}),(0,a.jsxs)(p.Ay,{item:!0,xs:12,sm:6,children:[(0,a.jsx)(i.A,{variant:"body2",color:"text.secondary",children:"Contact Email"}),(0,a.jsx)(i.A,{variant:"body1",children:k.contactEmail})]}),(0,a.jsxs)(p.Ay,{item:!0,xs:12,children:[(0,a.jsx)(i.A,{variant:"body2",color:"text.secondary",children:"Request Title"}),(0,a.jsx)(i.A,{variant:"body1",children:k.title})]}),(0,a.jsxs)(p.Ay,{item:!0,xs:12,children:[(0,a.jsx)(i.A,{variant:"body2",color:"text.secondary",children:"Date Range"}),(0,a.jsxs)(i.A,{variant:"body1",children:[k.dateRange.startDate," to ",k.dateRange.endDate,k.dateRange.preset&&" (".concat(k.dateRange.preset,")")]})]}),(0,a.jsxs)(p.Ay,{item:!0,xs:12,children:[(0,a.jsx)(i.A,{variant:"body2",color:"text.secondary",children:"Description"}),(0,a.jsx)(i.A,{variant:"body1",children:k.description})]}),k.attachmentCount>0&&(0,a.jsxs)(p.Ay,{item:!0,xs:12,children:[(0,a.jsx)(i.A,{variant:"body2",color:"text.secondary",children:"Attachments"}),(0,a.jsxs)(i.A,{variant:"body1",children:[k.attachmentCount," file(s) uploaded"]})]})]})]})}),(0,a.jsxs)(s.A,{sx:{mt:4,p:2,bgcolor:"grey.50",borderRadius:1},children:[(0,a.jsx)(i.A,{variant:"h6",gutterBottom:!0,children:"Need Help?"}),(0,a.jsx)(i.A,{variant:"body2",color:"text.secondary",children:"If you can't find your request or have questions about the status, please contact the relevant department directly or call our main office for assistance."})]})]})}},8667:(e,t,r)=>{"use strict";let a,n;r.d(t,{hY:()=>u,Fc:()=>l});var s=r(9708),i=r(2078);let o={apiKey:"demo-key",authDomain:"demo-project.firebaseapp.com",projectId:"public-records-demo",storageBucket:"public-records-demo.appspot.com",messagingSenderId:"123456789",appId:"1:123456789:web:demo123"},{app:c,db:d}=(()=>{if(a=(0,i.Dk)().length?(0,i.Dk)()[0]:(0,i.Wp)(o),!n){n=(0,s.aU)(a);let e="localhost:8080";try{let[t,r]=e.split(":");(0,s.vN)(n,t,parseInt(r)),console.log("Connected to Firestore emulator at",e)}catch(e){console.warn("Failed to connect to Firestore emulator:",e)}}return{app:a,db:n}})(),l=async e=>{try{var t;let r=(()=>{let e=Date.now().toString().slice(-6),t=Math.random().toString(36).substring(2,6).toUpperCase();return"PR-".concat(e,"-").concat(t)})(),a=s.Dc.now(),n={trackingId:r,title:e.title,department:e.department,description:e.description,dateRange:e.dateRange,contactEmail:e.contactEmail,status:"submitted",submittedAt:a,updatedAt:a,attachmentCount:(null==(t=e.files)?void 0:t.length)||0,attachmentPaths:[]},i=await (0,s.gS)((0,s.rJ)(d,"requests"),n);return console.log("Request saved with ID:",i.id),{id:i.id,trackingId:r}}catch(e){throw console.error("Error saving request:",e),Error("Failed to save request. Please try again.")}},u=async e=>{try{let t=(0,s.P)((0,s.rJ)(d,"requests"),(0,s._M)("trackingId","==",e)),r=await (0,s.GG)(t);if(r.empty)return null;let a=r.docs[0];return{id:a.id,...a.data()}}catch(e){throw console.error("Error fetching request by tracking ID:",e),Error("Failed to fetch request")}}}},e=>{e.O(0,[135,36,283,111,437,441,255,358],()=>e(e.s=146)),_N_E=e.O()}]);